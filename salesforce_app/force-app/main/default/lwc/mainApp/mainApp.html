<template>
    <div class="app-container">

        <!-- CASE 1: NOT AUTHENTICATED (Show Login Selection or Forms) -->
        <template if:false={isAuthenticated}>

            <!-- ROLE SELECTION SCREEN -->
            <template if:false={selectedRole}>
                <div class="role-selection-screen">
                    <!-- Background Animation -->
                    <div class="background-shapes">
                        <div class="shape shape-1"></div>
                        <div class="shape shape-2"></div>
                    </div>

                    <div class="glass-panel">
                        <h1>Welcome to Portal</h1>
                        <p>Select your role to continue</p>

                        <div class="role-cards">
                            <div class="role-card intern" onclick={selectInternRole}>
                                <div class="icon">üéì</div>
                                <h3>Student / Intern</h3>
                                <p>Access your dashboard</p>
                            </div>

                            <div class="role-card admin" onclick={selectAdminRole}>
                                <div class="icon">üõ°Ô∏è</div>
                                <h3>Administrator</h3>
                                <p>Manage the platform</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <!-- LOGIN FORMS -->
            <template if:true={selectedRole}>
                <div class="login-wrapper">
                    <button class="back-btn" onclick={clearRole}>‚Üê Back</button>

                    <template if:true={isInternRole}>
                        <c-intern-login onlogin={handleInternLogin}></c-intern-login>
                    </template>

                    <template if:true={isAdminRole}>
                        <c-admin-login onlogin={handleAdminLogin}></c-admin-login>
                    </template>
                </div>
            </template>

        </template>

        <!-- CASE 2: AUTHENTICATED (Show Dashboards) -->
        <template if:true={isAuthenticated}>

            <template if:true={isInternSession}>
                <c-intern-dashboard token={sessionToken} onlogout={handleLogout}></c-intern-dashboard>
            </template>

            <template if:true={isAdminSession}>
                <!-- Send token and role to admin dashboard -->
                <c-admin-dashboard token={sessionToken} role={adminRole} onlogout={handleLogout}></c-admin-dashboard>
            </template>

        </template>

    </div>
</template>