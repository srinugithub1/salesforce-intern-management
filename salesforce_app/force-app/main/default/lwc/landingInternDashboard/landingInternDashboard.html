<template>
    <div class="dashboard-wrapper">
        <!-- TOP HEADER -->
        <header class="app-header">
            <div class="header-left">
                <div class="brand-logo">
                    <img src={learnersByteLogo} alt="LearnersByte Expertpedia" class="logo-image" />
                </div>
            </div>
            <div class="header-center">
                <div class="datetime-display">
                    <div class="time-display">{currentTime}</div>
                    <div class="date-display">{currentDate}</div>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <template if:true={profilePicUrl}>
                        <img src={profilePicUrl} alt="Avatar" class="user-avatar-img" />
                    </template>
                    <template if:false={profilePicUrl}>
                        <div class="user-avatar">{internNameFirstLetter}</div>
                    </template>
                    <div class="user-name-block">
                        <span class="user-name">{internName}</span>
                        <template if:true={collegeName}>
                            <span class="user-college">{collegeName}</span>
                        </template>
                    </div>
                    <button class="logout-btn" onclick={handleLogout}>
                        <lightning-icon icon-name="utility:logout" size="x-small"></lightning-icon>
                        <span>Logout</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- TAB NAVIGATION -->
        <nav class="tab-navigation">
            <button class={dashboardTabClass} onclick={handleTabSwitch} data-tab="dashboard">
                <lightning-icon icon-name="utility:home" size="x-small"></lightning-icon>
                <span>Dashboard</span>
            </button>
            <button class={tasksTabClass} onclick={handleTabSwitch} data-tab="mytasks">
                <lightning-icon icon-name="utility:task" size="x-small"></lightning-icon>
                <span>My Tasks</span>
            </button>
            <button class={resourcesTabClass} onclick={handleTabSwitch} data-tab="resources">
                <lightning-icon icon-name="standard:knowledge" size="x-small"></lightning-icon>
                <span>Resources</span>
            </button>
            <button class={workLogsTabClass} onclick={handleTabSwitch} data-tab="worklogs">
                <lightning-icon icon-name="standard:education" size="x-small"></lightning-icon>
                <span>Diary</span>
            </button>
            <button class={profileTabClass} onclick={handleTabSwitch} data-tab="profile">
                <lightning-icon icon-name="standard:user" size="x-small"></lightning-icon>
                <span>Profile</span>
            </button>
            <button class={mentorshipTabClass} onclick={handleTabSwitch} data-tab="mentorship">
                <lightning-icon icon-name="standard:coaching" size="x-small"></lightning-icon>
                <span>Mentorship</span>
            </button>
        </nav>

        <!-- MAIN CONTENT AREA -->
        <div class="content-area">
            <!-- Loading Spinner -->
            <template if:true={isLoading}>
                <div class="loading-overlay">
                    <lightning-spinner alternative-text="Loading" size="medium" variant="brand"></lightning-spinner>
                </div>
            </template>

            <!-- ====================== DASHBOARD TAB ====================== -->
            <template if:true={isDashboard}>
                <div class="dashboard-content animate-fade-in">

                    <!-- Row 1: Welcome Banner + Clock In/Out -->
                    <div class="dash-top-row">
                        <!-- Welcome Banner -->
                        <div class="dash-welcome-banner animate-slide-up">
                            <div class="welcome-left">
                                <div class="welcome-greeting">
                                    <template if:true={profilePicUrl}>
                                        <img src={profilePicUrl} alt="Avatar" class="welcome-avatar-img" />
                                    </template>
                                    <template if:false={profilePicUrl}>
                                        <div class="welcome-avatar">{internNameFirstLetter}</div>
                                    </template>
                                    <div>
                                        <h2 class="welcome-name">Welcome, {internName}</h2>
                                        <p class="welcome-sub">Here's your daily overview</p>
                                    </div>
                                </div>
                            </div>
                            <div class="welcome-right">
                                <template if:true={isClockedIn}>
                                    <div class="status-indicator active-status">
                                        <span class="pulse-dot active-dot"></span>
                                        <span>Active</span>
                                    </div>
                                </template>
                                <template if:false={isClockedIn}>
                                    <div class="status-indicator offline-status">
                                        <span class="pulse-dot offline-dot"></span>
                                        <span>Offline</span>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Clock In/Out Card -->
                        <div class="dash-clock-card animate-slide-up delay-1">
                            <div class="clock-card-inner">
                                <div class="clock-icon-wrap">
                                    <template if:false={isClockedIn}>
                                        <lightning-icon icon-name="utility:clock" size="medium"></lightning-icon>
                                    </template>
                                    <template if:true={isClockedIn}>
                                        <lightning-icon icon-name="utility:check" size="medium"></lightning-icon>
                                    </template>
                                </div>
                                <template if:false={isClockedIn}>
                                    <p class="clock-label">Start your day</p>
                                    <button class="clock-action-btn clock-in-btn" onclick={handleClockIn}>
                                        Clock In
                                    </button>
                                </template>
                                <template if:true={isClockedIn}>
                                    <p class="clock-label">Currently working</p>
                                    <button class="clock-action-btn clock-out-btn" onclick={handleClockOut}>
                                        Clock Out
                                    </button>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Row 2: Four Stats Cards -->
                    <div class="dash-stats-grid">
                        <div class="dash-stat-card stat-blue animate-slide-up delay-1">
                            <div class="stat-card-icon">
                                <lightning-icon icon-name="utility:clock" size="small"></lightning-icon>
                            </div>
                            <div class="stat-card-data">
                                <span class="stat-card-value">{weeklyHours}<span
                                        class="stat-unit">/{weeklyGoal}h</span></span>
                                <span class="stat-card-label">Weekly Hours</span>
                            </div>
                            <div class="stat-card-bar">
                                <div class="stat-bar-fill bar-blue" style={progressStyle}></div>
                            </div>
                            <span class="stat-card-percent">{progressPercentRounded}%</span>
                        </div>

                        <div class="dash-stat-card stat-green animate-slide-up delay-2">
                            <div class="stat-card-icon">
                                <lightning-icon icon-name="utility:task" size="small"></lightning-icon>
                            </div>
                            <div class="stat-card-data">
                                <span class="stat-card-value">{completedTaskCount}<span
                                        class="stat-unit">/{totalTaskCount}</span></span>
                                <span class="stat-card-label">Tasks Done</span>
                            </div>
                            <div class="stat-card-bar">
                                <div class="stat-bar-fill bar-green" style={taskCompletionStyle}></div>
                            </div>
                            <span class="stat-card-percent">{taskCompletionPercent}%</span>
                        </div>

                        <div class="dash-stat-card stat-purple animate-slide-up delay-3">
                            <div class="stat-card-icon">
                                <lightning-icon icon-name="utility:checkin" size="small"></lightning-icon>
                            </div>
                            <div class="stat-card-data">
                                <span class="stat-card-value">{totalPresentDays}<span
                                        class="stat-unit">/{totalElapsedDays}d</span></span>
                                <span class="stat-card-label">Attendance</span>
                            </div>
                            <div class="stat-card-bar">
                                <div class="stat-bar-fill bar-purple" style={attendancePercentStyle}></div>
                            </div>
                            <span class="stat-card-percent">{attendancePercent}%</span>
                        </div>

                        <div class="dash-stat-card stat-orange animate-slide-up delay-4">
                            <div class="stat-card-icon">
                                <lightning-icon icon-name="utility:favorite" size="small"></lightning-icon>
                            </div>
                            <div class="stat-card-data">
                                <span class="stat-card-value">{streak}</span>
                                <span class="stat-card-label">Day Streak</span>
                            </div>
                            <div class="stat-card-bar">
                                <div class="stat-bar-fill bar-orange" style="width: 100%"></div>
                            </div>
                            <span class="stat-card-percent">Keep going!</span>
                        </div>
                    </div>

                    <!-- Row 3: Two-Column Layout -->
                    <div class="dash-two-col">
                        <!-- Left: Recent Tasks -->
                        <div class="dash-card tasks-preview animate-fade-in delay-3">
                            <div class="section-header">
                                <h3>Recent Tasks</h3>
                                <button class="view-all-btn" onclick={handleViewAllTasks}>
                                    View All
                                    <lightning-icon icon-name="utility:forward" size="xx-small"></lightning-icon>
                                </button>
                            </div>
                            <div class="task-list">
                                <template for:each={recentTasks} for:item="task">
                                    <div key={task.Id} class="task-item">
                                        <div class="task-status-dot" data-status={task.Status__c}></div>
                                        <div class="task-details">
                                            <div class="task-title">{task.Name}</div>
                                            <div class="task-meta">
                                                <span class="task-priority">Priority: {task.Priority__c}</span>
                                            </div>
                                        </div>
                                        <div class={task.statusClass}>{task.Status__c}</div>
                                    </div>
                                </template>
                                <template if:false={recentTasks.length}>
                                    <div class="empty-state">
                                        <lightning-icon icon-name="utility:info" size="small"></lightning-icon>
                                        <p>No tasks assigned yet</p>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Right: Class Session Links Board -->
                        <div class="dash-card session-links-board animate-fade-in delay-3">
                            <div class="section-header">
                                <div class="header-title-wrapper">
                                    <lightning-icon icon-name="utility:video" size="small" class="header-icon"></lightning-icon>
                                    <h3>Online Class Sessions</h3>
                                </div>
                                <span class="live-indicator">
                                    <span class="pulse-dot"></span>
                                    Live Links
                                </span>
                            </div>

                            <div class="session-links-container">
                                <template for:each={sessionLinks} for:item="session">
                                    <div key={session.Id} class="session-link-card" data-color={session.colorClass}>
                                        <!-- Session Header -->
                                        <div class="session-card-header">
                                            <div class="session-date-badge" data-color={session.colorClass}>
                                                <lightning-icon icon-name="utility:event" size="xx-small"></lightning-icon>
                                                <span>{session.formattedDate}</span>
                                            </div>
                                            <template if:true={session.isToday}>
                                                <div class="today-badge">
                                                    <span class="today-pulse"></span>
                                                    Today
                                                </div>
                                            </template>
                                        </div>

                                        <!-- Session Content -->
                                        <div class="session-card-body">
                                            <div class="session-time-row">
                                                <div class="time-slot">
                                                    <lightning-icon icon-name="utility:clock" size="xx-small"></lightning-icon>
                                                    <span>{session.formattedStartTime} - {session.formattedEndTime}</span>
                                                </div>
                                            </div>

                                            <template if:true={session.Speaker__c}>
                                                <div class="session-speaker">
                                                    <lightning-icon icon-name="utility:user" size="xx-small"></lightning-icon>
                                                    <span>{session.Speaker__c}</span>
                                                </div>
                                            </template>

                                            <template if:true={session.Agenda__c}>
                                                <div class="session-agenda">
                                                    {session.Agenda__c}
                                                </div>
                                            </template>
                                        </div>

                                        <!-- Join Link Button -->
                                        <div class="session-card-footer">
                                            <template if:true={session.Session_URL__c}>
                                                <a href={session.Session_URL__c} target="_blank" class="join-session-btn" data-color={session.colorClass}>
                                                    <lightning-icon icon-name="utility:share" size="xx-small"></lightning-icon>
                                                    <span>Join Session</span>
                                                    <div class="btn-shimmer"></div>
                                                </a>
                                            </template>
                                        </div>
                                    </div>
                                </template>

                                <!-- Empty State -->
                                <template if:false={sessionLinks.length}>
                                    <div class="session-empty-state">
                                        <div class="empty-icon">
                                            <lightning-icon icon-name="utility:video" size="large"></lightning-icon>
                                        </div>
                                        <h4>No Upcoming Sessions</h4>
                                        <p>Class session links will appear here when scheduled</p>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Row 4: Announcements -->
                    <template if:true={hasAnnouncements}>
                        <div class="announcements-section animate-fade-in delay-4">
                            <div class="section-header">
                                <h3>Latest Announcements</h3>
                            </div>
                            <div class="announcements-marquee">
                                <div class="announcements-track">
                                    <template for:each={announcements} for:item="announcement">
                                        <div key={announcement.uniqueKey} class="announcement-card">
                                            <lightning-icon icon-name={announcement.icon} size="small"></lightning-icon>
                                            <div class="announcement-content">
                                                <div class="announcement-title">{announcement.Title__c}</div>
                                                <div class="announcement-message">{announcement.Message__c}</div>
                                            </div>
                                            <span class={announcement.badgeClass}>{announcement.Type__c}</span>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- Row 5: Attendance History Table -->
                    <div class="attendance-history-section animate-fade-in delay-4">
                        <div class="section-header">
                            <h3>Attendance History</h3>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Check In</th>
                                        <th>Check Out</th>
                                        <th>Hours</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template for:each={visibleHistory} for:item="record">
                                        <tr key={record.Id}>
                                            <td>{record.Date__c}</td>
                                            <td>{record.Login_Time__c}</td>
                                            <td>{record.Logout_Time__c}</td>
                                            <td>{record.Working_Hours__c}</td>
                                            <td>
                                                <span class="status-dot" data-status={record.Status__c}></span>
                                                {record.Status__c}
                                            </td>
                                        </tr>
                                    </template>
                                    <template if:false={visibleHistory.length}>
                                        <tr>
                                            <td colspan="5" class="no-data">No attendance records found</td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                        <template if:true={history.length}>
                            <div class="pagination-controls">
                                <button class="pagination-btn" onclick={handleHistoryPrev}
                                    disabled={isFirstHistoryPage}>
                                    <lightning-icon icon-name="utility:chevronleft" size="xx-small"></lightning-icon>
                                    Previous
                                </button>
                                <span class="pagination-info">Page {historyPage}</span>
                                <button class="pagination-btn" onclick={handleHistoryNext} disabled={isLastHistoryPage}>
                                    Next
                                    <lightning-icon icon-name="utility:chevronright" size="xx-small"></lightning-icon>
                                </button>
                            </div>
                        </template>
                    </div>
                </div>
            </template>

            <!-- ====================== MY TASKS TAB ====================== -->
            <template if:true={isMyTasks}>
                <div class="tasks-content animate-fade-in">
                    <div class="section-header-main">
                        <h2>My Tasks</h2>
                        <p>Manage and track your assigned tasks</p>
                    </div>

                    <!-- Task Stats Summary -->
                    <div class="task-stats-bar">
                        <div class="task-stat-item stat-total">
                            <span class="task-stat-number">{totalTaskCount}</span>
                            <span class="task-stat-label">Total</span>
                        </div>
                        <div class="task-stat-item stat-assigned-count">
                            <span class="task-stat-number">{assignedTaskCount}</span>
                            <span class="task-stat-label">Assigned</span>
                        </div>
                        <div class="task-stat-item stat-inprogress-count">
                            <span class="task-stat-number">{inProgressTaskCount}</span>
                            <span class="task-stat-label">In Progress</span>
                        </div>
                        <div class="task-stat-item stat-completed-count">
                            <span class="task-stat-number">{completedTaskCount}</span>
                            <span class="task-stat-label">Completed</span>
                        </div>
                    </div>

                    <!-- Filter Pills -->
                    <div class="filter-pills-section">
                        <span class="filter-label">Filter</span>
                        <div class="filter-pills">
                            <button class={filterAllClass} data-filter="All" onclick={handleFilterClick}>
                                All
                            </button>
                            <button class={filterAssignedClass} data-filter="Assigned" onclick={handleFilterClick}>
                                Assigned
                            </button>
                            <button class={filterInProgressClass} data-filter="In Progress" onclick={handleFilterClick}>
                                In Progress
                            </button>
                            <button class={filterCompletedClass} data-filter="Completed" onclick={handleFilterClick}>
                                Completed
                            </button>
                        </div>
                    </div>

                    <!-- Task Cards Grid -->
                    <div class="task-grid">
                        <template for:each={visibleTasks} for:item="task">
                            <div key={task.Id} class={task.taskCardClass}>
                                <div class="task-card-accent" data-status={task.Status__c}></div>
                                <div class="task-card-content">
                                    <div class="task-card-header">
                                        <div class="task-card-title">{task.Name}</div>
                                        <div class={task.statusClass}>{task.Status__c}</div>
                                    </div>
                                    <div class="task-card-body">
                                        <template if:true={task.Description__c}>
                                            <p class="task-description">{task.Description__c}</p>
                                        </template>
                                        <div class="task-meta-row">
                                            <div class={task.priorityClass}>
                                                <lightning-icon icon-name="utility:priority"
                                                    size="xx-small"></lightning-icon>
                                                <span>{task.Priority__c}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-card-footer">
                                        <button class={task.actionBtnClass} onclick={handleSelectTask}
                                            data-id={task.Id}>
                                            <lightning-icon icon-name="utility:edit" size="xx-small"></lightning-icon>
                                            Update Status
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                        <template if:false={filteredTasks.length}>
                            <div class="empty-state-large">
                                <lightning-icon icon-name="utility:task" size="large"></lightning-icon>
                                <h3>No tasks found</h3>
                                <p>No tasks match the selected filter</p>
                            </div>
                        </template>
                    </div>

                    <!-- Pagination Controls -->
                    <template if:true={filteredTasks.length}>
                        <div class="pagination-controls">
                            <button class="pagination-btn" onclick={handleTaskPrev} disabled={isFirstTaskPage}>
                                <lightning-icon icon-name="utility:chevronleft" size="xx-small"></lightning-icon>
                                Previous
                            </button>
                            <span class="pagination-info">Page {taskPage}</span>
                            <button class="pagination-btn" onclick={handleTaskNext} disabled={isLastTaskPage}>
                                Next
                                <lightning-icon icon-name="utility:chevronright" size="xx-small"></lightning-icon>
                            </button>
                        </div>
                    </template>

                    <!-- Task Detail Modal - REDESIGNED -->
                    <template if:true={selectedTask}>
                        <section class="modal-overlay" onclick={handleCloseTask}>
                            <div class="modal-content task-update-modal" onclick={handleStopPropagation}>
                                <!-- Modern Gradient Header with Icon -->
                                <div class="modal-header-redesigned">
                                    <div class="modal-header-content">
                                        <div class="modal-icon-wrapper">
                                            <lightning-icon icon-name="standard:task" size="small"></lightning-icon>
                                        </div>
                                        <div class="modal-title-section">
                                            <h3 class="modal-main-title">Update Task Status</h3>
                                            <p class="modal-subtitle">{selectedTask.Name}</p>
                                        </div>
                                    </div>
                                    <button class="modal-close-btn-redesigned" onclick={handleCloseTask}>
                                        <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                                    </button>
                                </div>

                                <!-- Visual Progress Indicator -->
                                <div class="task-progress-tracker">
                                    <div class="progress-step-line">
                                        <div class={progressLineClass}></div>
                                    </div>
                                    <div class={progressStepAssignedClass} data-status="Assigned"
                                        onclick={handleStatusCardClick}>
                                        <div class="progress-step-icon">
                                            <lightning-icon icon-name="utility:inbox" size="xx-small"></lightning-icon>
                                        </div>
                                        <span class="progress-step-label">Assigned</span>
                                    </div>
                                    <div class={progressStepInProgressClass} data-status="In Progress"
                                        onclick={handleStatusCardClick}>
                                        <div class="progress-step-icon">
                                            <lightning-icon icon-name="utility:clock" size="xx-small"></lightning-icon>
                                        </div>
                                        <span class="progress-step-label">In Progress</span>
                                    </div>
                                    <div class={progressStepCompletedClass} data-status="Completed"
                                        onclick={handleStatusCardClick}>
                                        <div class="progress-step-icon">
                                            <lightning-icon icon-name="utility:success"
                                                size="xx-small"></lightning-icon>
                                        </div>
                                        <span class="progress-step-label">Completed</span>
                                    </div>
                                </div>

                                <!-- Enhanced Form Body -->
                                <div class="modal-body-redesigned">
                                    <!-- Status Selector with Interactive Cards -->
                                    <div class="status-selector-section">
                                        <div class="section-header">
                                            <lightning-icon icon-name="utility:record_update"
                                                size="x-small"></lightning-icon>
                                            <span class="section-title">Update Status</span>
                                        </div>
                                        <div class="status-cards-grid">
                                            <div class={statusCardAssignedClass} data-status="Assigned"
                                                onclick={handleStatusCardClick}>
                                                <div class="status-card-icon status-icon-assigned">
                                                    <lightning-icon icon-name="utility:inbox"
                                                        size="small"></lightning-icon>
                                                </div>
                                                <div class="status-card-content">
                                                    <div class="status-card-title">Assigned</div>
                                                    <div class="status-card-desc">Task received</div>
                                                </div>
                                                <div class="status-card-check">
                                                    <lightning-icon icon-name="utility:check"
                                                        size="xx-small"></lightning-icon>
                                                </div>
                                            </div>
                                            <div class={statusCardInProgressClass} data-status="In Progress"
                                                onclick={handleStatusCardClick}>
                                                <div class="status-card-icon status-icon-inprogress">
                                                    <lightning-icon icon-name="utility:clock"
                                                        size="small"></lightning-icon>
                                                </div>
                                                <div class="status-card-content">
                                                    <div class="status-card-title">In Progress</div>
                                                    <div class="status-card-desc">Working on it</div>
                                                </div>
                                                <div class="status-card-check">
                                                    <lightning-icon icon-name="utility:check"
                                                        size="xx-small"></lightning-icon>
                                                </div>
                                            </div>
                                            <div class={statusCardCompletedClass} data-status="Completed"
                                                onclick={handleStatusCardClick}>
                                                <div class="status-card-icon status-icon-completed">
                                                    <lightning-icon icon-name="utility:success"
                                                        size="small"></lightning-icon>
                                                </div>
                                                <div class="status-card-content">
                                                    <div class="status-card-title">Completed</div>
                                                    <div class="status-card-desc">Task done</div>
                                                </div>
                                                <div class="status-card-check">
                                                    <lightning-icon icon-name="utility:check"
                                                        size="xx-small"></lightning-icon>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Task Details Card -->
                                    <div class="task-details-card">
                                        <div class="section-header">
                                            <lightning-icon icon-name="utility:text" size="x-small"></lightning-icon>
                                            <span class="section-title">Task Details</span>
                                        </div>

                                        <!-- Today's Progress Field -->
                                        <div class="form-field-wrapper">
                                            <div class="field-icon-label">
                                                <lightning-icon icon-name="utility:description"
                                                    size="x-small"></lightning-icon>
                                                <span class="field-label-text">Today's Progress</span>
                                            </div>
                                            <lightning-textarea name="Today_Work_Progress__c" label=""
                                                value={selectedTask.Today_Work_Progress__c} onchange={handleTaskInput}
                                                variant="label-hidden"
                                                placeholder="Describe your accomplishments today..."
                                                class="custom-textarea"></lightning-textarea>
                                        </div>

                                        <!-- Submission Link Field -->
                                        <div class="form-field-wrapper">
                                            <div class="field-icon-label">
                                                <lightning-icon icon-name="utility:link"
                                                    size="x-small"></lightning-icon>
                                                <span class="field-label-text">Submission Link</span>
                                            </div>
                                            <lightning-input name="Submission_Link__c" label="" type="url"
                                                value={selectedTask.Submission_Link__c} onchange={handleTaskInput}
                                                variant="label-hidden" placeholder="https://example.com/submission"
                                                class="custom-input"></lightning-input>
                                        </div>

                                        <!-- Remarks Field -->
                                        <div class="form-field-wrapper">
                                            <div class="field-icon-label">
                                                <lightning-icon icon-name="utility:comments"
                                                    size="x-small"></lightning-icon>
                                                <span class="field-label-text">Additional Remarks</span>
                                            </div>
                                            <lightning-textarea name="Remarks__c" label=""
                                                value={selectedTask.Remarks__c} onchange={handleTaskInput}
                                                variant="label-hidden"
                                                placeholder="Any blockers, notes, or additional comments..."
                                                class="custom-textarea"></lightning-textarea>
                                        </div>
                                    </div>
                                </div>

                                <!-- Modern Footer with Enhanced Buttons -->
                                <div class="modal-footer-redesigned">
                                    <button class="btn-cancel-redesigned" onclick={handleCloseTask}>
                                        <lightning-icon icon-name="utility:close" size="xx-small"></lightning-icon>
                                        <span>Cancel</span>
                                    </button>
                                    <button class="btn-save-redesigned" onclick={handleSaveTask}>
                                        <lightning-icon icon-name="utility:check" size="xx-small"></lightning-icon>
                                        <span>Save Changes</span>
                                    </button>
                                </div>
                            </div>
                        </section>
                    </template>
                </div>
            </template>

            <!-- ====================== RESOURCES TAB ====================== -->
            <template if:true={isResources}>
                <div class="resources-content animate-fade-in">
                    <div class="section-header-main">
                        <h2>Learning Resources</h2>
                        <p>Access study materials and documentation</p>
                    </div>

                    <!-- Resources Grid -->
                    <div class="resources-grid">
                        <template for:each={visibleResources} for:item="resource">
                            <div key={resource.Id} class="resource-card animate-slide-up">
                                <div class="resource-icon">
                                    <lightning-icon icon-name={resource.iconName} size="medium"></lightning-icon>
                                </div>
                                <div class="resource-details">
                                    <h4 class="resource-title">{resource.Name}</h4>
                                    <p class="resource-description">{resource.Description__c}</p>
                                    <div class="resource-meta">
                                        <span class="resource-type-badge">{resource.Type__c}</span>
                                    </div>
                                </div>
                                <div class="resource-actions">
                                    <template if:true={resource.Link__c}>
                                        <a href={resource.Link__c} target="_blank" class="resource-action-btn">
                                            <lightning-icon icon-name="utility:open" size="xx-small"></lightning-icon>
                                            View Resource
                                        </a>
                                    </template>
                                </div>
                            </div>
                        </template>
                        <template if:false={resources.length}>
                            <div class="empty-state-large">
                                <lightning-icon icon-name="standard:knowledge" size="large"></lightning-icon>
                                <h3>No resources available</h3>
                                <p>Resources will appear here when they are shared</p>
                            </div>
                        </template>
                    </div>

                    <!-- Pagination Controls -->
                    <template if:true={resources.length}>
                        <div class="pagination-controls">
                            <button class="pagination-btn" onclick={prevResourcesPage} disabled={isResourcesFirstPage}>
                                <lightning-icon icon-name="utility:chevronleft" size="xx-small"></lightning-icon>
                                Previous
                            </button>
                            <span class="pagination-info">Page {resourcesPage} of {totalResourcesPages}</span>
                            <button class="pagination-btn" onclick={nextResourcesPage} disabled={isResourcesLastPage}>
                                Next
                                <lightning-icon icon-name="utility:chevronright" size="xx-small"></lightning-icon>
                            </button>
                        </div>
                    </template>
                </div>
            </template>

            <!-- ====================== WORK LOGS/DIARY TAB ====================== -->
            <template if:true={isWorkLogs}>
                <div class="worklogs-content animate-fade-in">
                    <!-- Page Header -->
                    <div class="diary-page-header">
                        <div class="diary-header-content">
                            <div class="diary-header-icon">
                                <lightning-icon icon-name="standard:work_order" size="medium"></lightning-icon>
                            </div>
                            <div class="diary-header-text">
                                <h2 class="diary-main-title">My Daily Diary</h2>
                                <p class="diary-subtitle">Track your daily progress and reflections</p>
                            </div>
                        </div>
                    </div>

                    <!-- 50-50 Split Layout -->
                    <div class="diary-split-container">
                        <!-- LEFT SIDE: Submit Today's Entry -->
                        <div class="diary-left-panel">
                            <div class="diary-panel-header">
                                <div class="panel-header-icon panel-icon-purple">
                                    <lightning-icon icon-name="utility:edit" size="small"></lightning-icon>
                                </div>
                                <div class="panel-header-text">
                                    <h3 class="panel-title">Submit Today's Entry</h3>
                                    <p class="panel-desc">Log your daily work and learnings</p>
                                </div>
                            </div>

                            <div class="diary-form-wrapper">
                                <!-- Date & Course Row -->
                                <div class="diary-form-row">
                                    <div class="diary-form-field">
                                        <div class="field-label-enhanced">
                                            <lightning-icon icon-name="utility:event" size="xx-small"></lightning-icon>
                                            <span>Date</span>
                                        </div>
                                        <lightning-input type="date" name="date" label="" variant="label-hidden"
                                            value={logForm.date} data-field="date" onchange={handleLogInput}
                                            min={minEntryDate} max={maxEntryDate}
                                            class="enhanced-input"></lightning-input>
                                    </div>
                                    <div class="diary-form-field">
                                        <div class="field-label-enhanced">
                                            <lightning-icon icon-name="utility:education"
                                                size="xx-small"></lightning-icon>
                                            <span>Course</span>
                                        </div>
                                        <lightning-combobox label="" variant="label-hidden" value={logForm.course}
                                            options={courseOptions} onchange={handleCourseChange}
                                            placeholder="Select course" class="enhanced-combobox"></lightning-combobox>
                                    </div>
                                </div>

                                <!-- Module & Topic Row -->
                                <div class="diary-form-row">
                                    <div class="diary-form-field-full">
                                        <div class="field-label-enhanced">
                                            <lightning-icon icon-name="utility:layers" size="xx-small"></lightning-icon>
                                            <span>Module</span>
                                        </div>
                                        <lightning-dual-listbox label="Select Modules" source-label="Available"
                                            selected-label="Selected" options={moduleOptions} value={logForm.module}
                                            onchange={handleModuleChange} disabled={isModuleDisabled}
                                            class="enhanced-dual-listbox"></lightning-dual-listbox>
                                    </div>
                                </div>

                                <!-- Topics Row -->
                                <div class="diary-form-row">
                                    <div class="diary-form-field-full">
                                        <div class="field-label-enhanced">
                                            <lightning-icon icon-name="utility:topic" size="xx-small"></lightning-icon>
                                            <span>Topics</span>
                                        </div>
                                        <lightning-textarea label="" variant="label-hidden" value={logForm.topic}
                                            data-field="topic" onchange={handleLogInput}
                                            placeholder="Enter topics covered..."
                                            class="enhanced-textarea"></lightning-textarea>
                                    </div>
                                </div>

                                <!-- Hours & Submission Link Row -->
                                <div class="diary-form-row">
                                    <div class="diary-form-field">
                                        <div class="field-label-enhanced">
                                            <lightning-icon icon-name="utility:clock" size="xx-small"></lightning-icon>
                                            <span>Hours Worked</span>
                                        </div>
                                        <lightning-input type="number" label="" variant="label-hidden"
                                            value={logForm.hours} data-field="hours" onchange={handleLogInput} min="0"
                                            step="0.5" placeholder="0.0" class="enhanced-input"></lightning-input>
                                    </div>
                                    <div class="diary-form-field">
                                        <div class="field-label-enhanced">
                                            <lightning-icon icon-name="utility:link" size="xx-small"></lightning-icon>
                                            <span>Submission Link</span>
                                        </div>
                                        <lightning-input type="url" label="" variant="label-hidden"
                                            value={logForm.submissionLink} data-field="submissionLink"
                                            onchange={handleLogInput} placeholder="https://..."
                                            class="enhanced-input"></lightning-input>
                                    </div>
                                </div>

                                <!-- Description Field -->
                                <div class="diary-form-field-full">
                                    <div class="field-label-enhanced">
                                        <lightning-icon icon-name="utility:text" size="xx-small"></lightning-icon>
                                        <span>Description</span>
                                    </div>
                                    <lightning-textarea label="" variant="label-hidden" value={logForm.description}
                                        data-field="description" onchange={handleLogInput}
                                        placeholder="Describe what you worked on today..."
                                        class="enhanced-textarea"></lightning-textarea>
                                </div>

                                <!-- Key Learnings Field -->
                                <div class="diary-form-field-full">
                                    <div class="field-label-enhanced">
                                        <lightning-icon icon-name="utility:knowledge_base"
                                            size="xx-small"></lightning-icon>
                                        <span>Key Learnings</span>
                                    </div>
                                    <lightning-textarea label="" variant="label-hidden" value={logForm.learnings}
                                        data-field="learnings" onchange={handleLogInput}
                                        placeholder="What did you learn today?"
                                        class="enhanced-textarea"></lightning-textarea>
                                </div>

                                <!-- Blockers Field -->
                                <div class="diary-form-field-full">
                                    <div class="field-label-enhanced">
                                        <lightning-icon icon-name="utility:warning" size="xx-small"></lightning-icon>
                                        <span>Blockers & Challenges</span>
                                    </div>
                                    <lightning-textarea label="" variant="label-hidden" value={logForm.blockers}
                                        data-field="blockers" onchange={handleLogInput}
                                        placeholder="Any challenges or blockers?"
                                        class="enhanced-textarea"></lightning-textarea>
                                </div>

                                <!-- Submit Button -->
                                <div class="diary-form-actions">
                                    <button class="diary-submit-btn" onclick={handleSubmitLog}>
                                        <lightning-icon icon-name="utility:check" size="small"></lightning-icon>
                                        <span>Submit Today's Entry</span>
                                        <div class="btn-shine"></div>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- RIGHT SIDE: Previous Entries -->
                        <div class="diary-right-panel">
                            <div class="diary-panel-header">
                                <div class="panel-header-icon panel-icon-green">
                                    <lightning-icon icon-name="utility:history" size="small"></lightning-icon>
                                </div>
                                <div class="panel-header-text">
                                    <h3 class="panel-title">Previous Entries</h3>
                                    <p class="panel-desc">Your work history and progress</p>
                                </div>
                            </div>

                            <div class="diary-entries-wrapper">
                                <!-- Entry Cards -->
                                <div class="diary-entries-list">
                                    <template for:each={visibleWorkLogs} for:item="log">
                                        <div key={log.Id} class="diary-entry-card">
                                            <div class="entry-card-header">
                                                <div class="entry-date-badge">
                                                    <lightning-icon icon-name="utility:event"
                                                        size="xx-small"></lightning-icon>
                                                    <span>{log.Log_Date__c}</span>
                                                </div>
                                                <div class="entry-hours-badge">
                                                    <lightning-icon icon-name="utility:clock"
                                                        size="xx-small"></lightning-icon>
                                                    <span>{log.Hours_Spent__c}h</span>
                                                </div>
                                            </div>

                                            <div class="entry-card-body">
                                                <div class="entry-info-row">
                                                    <div class="entry-info-item">
                                                        <span class="entry-info-label">Course</span>
                                                        <span class="entry-info-value">{log.Course__c}</span>
                                                    </div>
                                                    <div class="entry-info-item">
                                                        <span class="entry-info-label">Module</span>
                                                        <span class="entry-info-value">{log.Module__c}</span>
                                                    </div>
                                                </div>

                                                <div class="entry-topic-pill" if:true={log.Topic__c}>
                                                    <lightning-icon icon-name="utility:topic"
                                                        size="xx-small"></lightning-icon>
                                                    <span>{log.Topic__c}</span>
                                                </div>

                                                <template if:true={log.Description__c}>
                                                    <div class="entry-description">
                                                        <div class="entry-desc-label">
                                                            <lightning-icon icon-name="utility:text"
                                                                size="xx-small"></lightning-icon>
                                                            <span>Description</span>
                                                        </div>
                                                        <p>{log.Description__c}</p>
                                                    </div>
                                                </template>

                                                <template if:true={log.Learnings__c}>
                                                    <div class="entry-learnings">
                                                        <div class="entry-learning-label">
                                                            <lightning-icon icon-name="utility:knowledge_base"
                                                                size="xx-small"></lightning-icon>
                                                            <span>Key Learnings</span>
                                                        </div>
                                                        <p>{log.Learnings__c}</p>
                                                    </div>
                                                </template>

                                                <template if:true={log.Blockers__c}>
                                                    <div class="entry-blockers">
                                                        <div class="entry-blocker-label">
                                                            <lightning-icon icon-name="utility:warning"
                                                                size="xx-small"></lightning-icon>
                                                            <span>Blockers</span>
                                                        </div>
                                                        <p>{log.Blockers__c}</p>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </template>

                                    <!-- No Entries State -->
                                    <template if:false={visibleWorkLogs.length}>
                                        <div class="diary-no-entries">
                                            <div class="no-entries-icon">
                                                <lightning-icon icon-name="utility:page" size="large"></lightning-icon>
                                            </div>
                                            <h4>No Diary Entries Yet</h4>
                                            <p>Start by submitting your first entry on the left</p>
                                        </div>
                                    </template>
                                </div>

                                <!-- Pagination -->
                                <template if:true={dailyLogs.length}>
                                    <div class="diary-pagination">
                                        <button class="diary-pagination-btn" onclick={prevWorkLogsPage}
                                            disabled={isWorkLogsFirstPage}>
                                            <lightning-icon icon-name="utility:chevronleft"
                                                size="xx-small"></lightning-icon>
                                            <span>Previous</span>
                                        </button>
                                        <div class="diary-pagination-info">
                                            <span class="page-number">{workLogsPage}</span>
                                            <span class="page-separator">of</span>
                                            <span class="page-total">{totalWorkLogsPages}</span>
                                        </div>
                                        <button class="diary-pagination-btn" onclick={nextWorkLogsPage}
                                            disabled={isWorkLogsLastPage}>
                                            <span>Next</span>
                                            <lightning-icon icon-name="utility:chevronright"
                                                size="xx-small"></lightning-icon>
                                        </button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <!-- ====================== PROFILE TAB ====================== -->
            <template if:true={isProfile}>
                <div class="profile-content animate-fade-in">
                    <div class="section-header-main">
                        <h2>My Profile</h2>
                        <p>Manage your personal information</p>
                    </div>

                    <div class="profile-container">
                        <!-- Profile Picture Section -->
                        <div class="profile-picture-section">
                            <div class="profile-picture-wrapper">
                                <template if:true={profilePicUrl}>
                                    <img src={profilePicUrl} alt="Profile Picture" class="profile-picture-large" />
                                </template>
                                <template if:false={profilePicUrl}>
                                    <div class="profile-picture-placeholder">
                                        <div class="profile-initial-large">{internNameFirstLetter}</div>
                                    </div>
                                </template>
                            </div>
                            <div class="profile-picture-actions">
                                <label for="profile-upload" class="btn-secondary upload-btn">
                                    <lightning-icon icon-name="utility:upload" size="xx-small"></lightning-icon>
                                    Upload Picture
                                </label>
                                <input type="file" id="profile-upload" accept="image/*" onchange={handleFileChange}
                                    style="display: none;" />
                                <p class="upload-hint">Max size: 3MB</p>
                            </div>
                        </div>

                        <!-- Profile Information -->
                        <div class="profile-info-section">
                            <div class="profile-header">
                                <h3>Personal Information</h3>
                                <template if:false={isEditingProfile}>
                                    <button class="btn-secondary" onclick={handleProfileEdit}>
                                        <lightning-icon icon-name="utility:edit" size="xx-small"></lightning-icon>
                                        Edit Profile
                                    </button>
                                </template>
                            </div>

                            <template if:false={isEditingProfile}>
                                <!-- View Mode -->
                                <div class="profile-fields">
                                    <div class="profile-field">
                                        <label class="field-label">Name</label>
                                        <div class="field-value">{profile.Name}</div>
                                    </div>
                                    <div class="profile-field">
                                        <label class="field-label">Email</label>
                                        <div class="field-value">{profile.Email__c}</div>
                                    </div>
                                    <div class="profile-field">
                                        <label class="field-label">Phone</label>
                                        <div class="field-value">{profile.Phone__c}</div>
                                    </div>
                                    <div class="profile-field">
                                        <label class="field-label">College</label>
                                        <div class="field-value">{profile.College_Name__c}</div>
                                    </div>
                                    <div class="profile-field">
                                        <label class="field-label">Roll Number</label>
                                        <div class="field-value">{profile.Roll_Number__c}</div>
                                    </div>
                                    <div class="profile-field profile-field-full">
                                        <label class="field-label">Bio</label>
                                        <div class="field-value">{profile.Bio__c}</div>
                                    </div>
                                </div>
                            </template>

                            <template if:true={isEditingProfile}>
                                <!-- Edit Mode -->
                                <div class="profile-fields-edit">
                                    <lightning-input label="Email" type="email" value={profile.Email__c}
                                        data-field="Email__c" onchange={handleProfileInput}></lightning-input>

                                    <lightning-input label="Phone" type="tel" value={profile.Phone__c}
                                        data-field="Phone__c" onchange={handleProfileInput}></lightning-input>

                                    <div class="form-full-width">
                                        <lightning-textarea label="Bio" value={profile.Bio__c} data-field="Bio__c"
                                            onchange={handleProfileInput}
                                            placeholder="Tell us about yourself..."></lightning-textarea>
                                    </div>
                                </div>
                                <div class="profile-actions">
                                    <button class="btn-secondary" onclick={handleProfileCancel}>Cancel</button>
                                    <button class="btn-primary" onclick={handleProfileSave}>
                                        <lightning-icon icon-name="utility:success" size="xx-small"></lightning-icon>
                                        Save Changes
                                    </button>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </template>

            <!-- ====================== MENTORSHIP TAB ====================== -->
            <template if:true={isMentorship}>
                <div class="mentorship-content animate-fade-in">
                    <!-- Gradient Page Header -->
                    <div class="mentorship-page-header">
                        <div class="page-header-content">
                            <div class="page-header-icon-wrapper">
                                <lightning-icon icon-name="standard:coaching" size="medium"></lightning-icon>
                            </div>
                            <div class="page-header-text">
                                <h2 class="page-header-title">Mentorship Hub</h2>
                                <p class="page-header-subtitle">Connect with mentors and accelerate your growth</p>
                            </div>
                        </div>
                        <div class="floating-circle circle-1"></div>
                        <div class="floating-circle circle-2"></div>
                    </div>

                    <!-- 50-50 Split Container -->
                    <div class="mentorship-split-container">
                        <!-- LEFT SIDE: Request Mentor -->
                        <div class="mentorship-left-panel">
                            <div class="mentorship-panel-header">
                                <div class="panel-header-icon panel-icon-blue">
                                    <lightning-icon icon-name="utility:add" size="small"></lightning-icon>
                                </div>
                                <div class="panel-header-text">
                                    <h3 class="panel-title">Request Mentor</h3>
                                    <p class="panel-desc">Submit a new mentorship request</p>
                                </div>
                            </div>

                            <div class="mentorship-form-wrapper">
                                <!-- Request Type Field -->
                                <div class="mentorship-form-field">
                                    <div class="field-label-enhanced">
                                        <lightning-icon icon-name="utility:list" size="xx-small"></lightning-icon>
                                        <span>Request Type</span>
                                    </div>
                                    <lightning-combobox label="" variant="label-hidden" value={mentorshipForm.type}
                                        options={requestTypes} data-field="type" onchange={handleMentorshipInput}
                                        class="enhanced-combobox">
                                    </lightning-combobox>
                                </div>

                                <!-- Description Field -->
                                <div class="mentorship-form-field-full">
                                    <div class="field-label-enhanced">
                                        <lightning-icon icon-name="utility:text" size="xx-small"></lightning-icon>
                                        <span>Description</span>
                                    </div>
                                    <lightning-textarea label="" variant="label-hidden"
                                        value={mentorshipForm.description} data-field="description"
                                        onchange={handleMentorshipInput}
                                        placeholder="Explain what you need help with..." class="enhanced-textarea"
                                        required>
                                    </lightning-textarea>
                                </div>

                                <!-- Submit Button -->
                                <div class="mentorship-form-actions">
                                    <button class="mentorship-submit-btn" onclick={handleSubmitMentorship}>
                                        <lightning-icon icon-name="utility:send" size="small"></lightning-icon>
                                        <span>Submit Request</span>
                                        <div class="btn-shine"></div>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- RIGHT SIDE: My Requests -->
                        <div class="mentorship-right-panel">
                            <div class="mentorship-panel-header">
                                <div class="panel-header-icon panel-icon-purple">
                                    <lightning-icon icon-name="utility:segments" size="small"></lightning-icon>
                                </div>
                                <div class="panel-header-text">
                                    <h3 class="panel-title">My Requests</h3>
                                    <p class="panel-desc">Track your mentorship requests</p>
                                </div>
                            </div>

                            <div class="mentorship-requests-wrapper">
                                <!-- Request Cards -->
                                <div class="mentorship-requests-list">
                                    <template for:each={visibleMentorshipRequests} for:item="request">
                                        <div key={request.Id} class="mentorship-request-card-new">
                                            <div class="request-card-header">
                                                <div class="request-type-pill">
                                                    <lightning-icon icon-name="utility:strategy"
                                                        size="xx-small"></lightning-icon>
                                                    <span>{request.Request_Type__c}</span>
                                                </div>
                                                <div class="request-status-pill" data-status={request.Status__c}>
                                                    <span>{request.Status__c}</span>
                                                </div>
                                            </div>

                                            <div class="request-card-body">
                                                <div class="request-description-section">
                                                    <div class="request-desc-label">
                                                        <lightning-icon icon-name="utility:text"
                                                            size="xx-small"></lightning-icon>
                                                        <span>Description</span>
                                                    </div>
                                                    <p>{request.Description__c}</p>
                                                </div>

                                                <div class="request-date-info">
                                                    <lightning-icon icon-name="utility:event"
                                                        size="xx-small"></lightning-icon>
                                                    <span>Requested on {request.CreatedDate}</span>
                                                </div>

                                                <template if:true={request.Response__c}>
                                                    <div class="request-response-section">
                                                        <div class="response-label">
                                                            <lightning-icon icon-name="utility:chat"
                                                                size="xx-small"></lightning-icon>
                                                            <span>Mentor Response</span>
                                                        </div>
                                                        <p>{request.Response__c}</p>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </template>

                                    <!-- No Requests State -->
                                    <template if:false={mentorshipRequests.length}>
                                        <div class="mentorship-no-requests">
                                            <div class="no-requests-icon">
                                                <lightning-icon icon-name="standard:coaching"
                                                    size="large"></lightning-icon>
                                            </div>
                                            <h4>No Requests Yet</h4>
                                            <p>Start by submitting your first mentorship request on the left</p>
                                        </div>
                                    </template>
                                </div>

                                <!-- Pagination -->
                                <template if:true={mentorshipRequests.length}>
                                    <div class="mentorship-pagination">
                                        <button class="mentorship-pagination-btn" onclick={prevMentorshipPage}
                                            disabled={isMentorshipFirstPage}>
                                            <lightning-icon icon-name="utility:chevronleft"
                                                size="xx-small"></lightning-icon>
                                            <span>Previous</span>
                                        </button>
                                        <div class="mentorship-pagination-info">
                                            <span class="page-number">{mentorshipPage}</span>
                                            <span class="page-separator">of</span>
                                            <span class="page-total">{totalMentorshipPages}</span>
                                        </div>
                                        <button class="mentorship-pagination-btn" onclick={nextMentorshipPage}
                                            disabled={isMentorshipLastPage}>
                                            <span>Next</span>
                                            <lightning-icon icon-name="utility:chevronright"
                                                size="xx-small"></lightning-icon>
                                        </button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <!-- ====================== CHECKOUT MODAL ====================== -->
        <template if:true={isCheckoutModalOpen}>
            <section class="modal-overlay">
                <div class="modal-content checkout-modal">
                    <div class="modal-header">
                        <h3>Confirm Checkout</h3>
                        <button class="modal-close-btn" onclick={closeCheckoutModal}>
                            <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p class="checkout-message">{canCheckoutMsg}</p>
                        <template if:true={isEarlyCheckout}>
                            <div class="early-checkout-notice">
                                <lightning-icon icon-name="utility:warning" size="small"></lightning-icon>
                                <p>Please provide a reason for early checkout:</p>
                            </div>
                            <lightning-textarea label="Reason for Early Checkout" value={checkoutReason}
                                onchange={handleCheckoutReasonChange}
                                placeholder="Explain why you're checking out early..." required></lightning-textarea>
                        </template>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-secondary" onclick={closeCheckoutModal}>Cancel</button>
                        <button class="btn-primary" data-variant={checkoutBtnVariant} onclick={confirmCheckout}>
                            Confirm Checkout
                        </button>
                    </div>
                </div>
            </section>
        </template>

        <!-- ====================== ALERT MODAL ====================== -->
        <template if:true={isAlertModalOpen}>
            <section class="modal-overlay">
                <div class="modal-content alert-modal">
                    <div class="modal-header">
                        <div class="alert-title-wrapper">
                            <lightning-icon icon-name={alertIconName} size="small"
                                class={alertThemeClass}></lightning-icon>
                            <h3>{alertTitle}</h3>
                        </div>
                        <button class="modal-close-btn" onclick={closeAlertModal}>
                            <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>{alertMessage}</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-primary" onclick={closeAlertModal}>OK</button>
                    </div>
                </div>
            </section>
        </template>
    </div>
</template>